import { Meta, Markdown } from '@storybook/blocks'
import Github from '../../assets/github.svg'

<Meta title='Docs/Components/Add new component' />

# Add a new component

## Guide

1. Create component folder inside src/components. The component file, styles and its configuration should be inside the same folder.
2. Create the component. It should created and exported and itll be available on Lumina. - see [Component](/docs/docs-components-add-new-component--documentation#component)
3. Configuration. Component should be proper configured, with its own configurations aswell configurations for Lumina. - see [General Configuration](/docs/docs-components-add-new-component--documentation#general-configuration)

## Component

<table>
  <thead>
    <tr>
      <td>**Imports**</td>
      <td>**Description**</td>
      <td>**Required**</td>
      <td>**Example**</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        Needs from lumina core - see
        [Helpers](/docs/docs-components-add-new-component--documentation#helpers)
      </td>
      <td>Importing code from core package</td>
      <td>❗️</td>
      <td>```ts import {EditorButtonsContainer} from '@lumina/core' ```</td>
    </tr>
    <tr>
      <td>
        Configuration file - see [Required
        Configuration](/docs/docs-components-required-configuration--documentation) to understand
        the required configuration forthe component
      </td>
      <td>Importing configuration for the specific component</td>
      <td>❗️</td>
      <td>```ts import {config} from './config' ```</td>
    </tr>
    <tr>
      <td>Styles</td>
      <td>Importing styles for the component</td>
      <td>❗️</td>
      <td>```ts import styles from './styles.scss' ```</td>
    </tr>
  </tbody>
</table>

### Example

```ts
import { EditorButtonsContainer } from '@lumina/core'
import { config } from './config'
import cx from 'classnames'
import styles from './button.module.scss'

const Button = ({ id, size = 'medium', style = 'outlined', text = 'button' }: TProps) => {
  const buttonStyles = cx(styles.button, style, size, styles.buttonContainer)

  return (
    <div>
      <button className={buttonStyles}>
        {text}
        <EditorButtonsContainer id={id} config={config} componentProps={{ size, style, text }} />
      </button>
    </div>
  )
}

```

## Required Lumina Configuration

All components should set their configurations on the general config.ts file.

```ts
import {
  Button,
  LinkBox,
  Grid,
  Image,
  Title,
  Text,
  Flex,
  Product,
  configLinkBox,
  configGrid,
  configImage,
  configTitle,
  configText,
  configFlex,
  configProduct,
  configButton,
} from '../components'

luminaConfig: TComponentConfig = {
  linkbox: {
    component: LinkBox,
    config: configLinkBox,
  },
  image: {
    component: Image,
    config: configImage,
  },
  title: {
    component: Title,
    config: configTitle,
  },
  flex: {
    component: Flex,
    config: configFlex,
  },
  button: {
    component: Button,
    config: configButton,
  },
}
```

- **component** : the component itself.
- **config** : configurations for the component - see [Required Configuration](/docs/docs-components-required-configuration--documentation).

## Helpers

- **EditorButtonsContainer** - This Lumina component is used to easily have access to the editor options, like editing or deleting the component.
  This is a wrapper to your components, overlaying the editor buttons.

  The props `id` and the `config` of the component are required. Any other props are optional and accepted.

  ```ts
   <EditorButtonsContainer id={id} config={config} componentProps={{ size, style, text }} />
  ```

## Example

_Image component_

```ts
import { config } from './config'
import { EditorButtonsContainer } from '@lumina/core'
import styles from './image.scss'


export const Image = ({ href, alt, id }: TProps) => {
  if (!href) return null
  return (
    <div className={styles.imageContainer}>
      <img className='image' src={href} alt={alt} />
      <EditorButtonsContainer id={id} config={config} componentProps={{ href, alt }} />
    </div>
  )
}

```

---

_Image component configuration_

```ts
import type { TConfig } from '@lumina/core'

export const config: TConfig = {
  name: 'Image',
  type: 'image',
  props: [
    {
      type: 'string',
      name: 'href',
      label: 'Href',
    },
    {
      type: 'string',
      name: 'alt',
      label: 'Alt',
    },
  ],
  editor: {
    children: false,
    editable: true,
    delete: true,
  },
}
```

---

_Lumina configuration_

```ts
const luminaConfig: TComponentConfig = {
  image: {
    component: Image,
    config: configImage,
  },
}
```

---

_TComponentConfig and TConfig _

```ts
export type TComponentConfig = {
  [key: string]: {
    component: (props: any) => React.JSX.Element | null
    config: TConfig
  }
}
export type TConfig = {
  name: string
  type: string
  props?: (TConfigItemValue | TConfigItemSelect)[]
  editor: TEditorConfig
}
```
